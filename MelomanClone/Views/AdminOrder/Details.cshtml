@model MelomanClone.Models.Order

<h2>Order #@Model.Id</h2>

<p>
    <strong>Date:</strong> @Model.CreatedAt.ToLocalTime()<br />
    <strong>Status:</strong> @Model.Status<br />
    <strong>Total:</strong> @Model.TotalPrice ₸
</p>

<h4>Items</h4>

<ul>
    @foreach (var item in Model.Items)
    {
        <li>
            @item.ProductTitle —
            @item.Quantity x @item.Price ₸
        </li>
    }
</ul>

<hr />

<h4>Change Status</h4>

<form method="post" asp-action="ChangeStatus">
    <input type="hidden" name="id" value="@Model.Id" />

    <select name="status" class="form-control w-25">
        <option value="Pending" selected="@(Model.Status == "Pending")">Pending</option>
        <option value="Completed" selected="@(Model.Status == "Completed")">Completed</option>
        <option value="Cancelled" selected="@(Model.Status == "Cancelled")">Cancelled</option>
    </select>

    <button class="btn btn-success mt-2">Update</button>
</form>

<a asp-action="Index" class="btn btn-secondary mt-3">Back</a>

<a asp-controller="Admin"
   asp-action="DownloadOrderReceipt"
   asp-route-id="@Model.Id"
   class="btn btn-outline-danger mb-3">
    Download Receipt (PDF)
</a>

